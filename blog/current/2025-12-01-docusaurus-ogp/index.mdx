---
title: Docusaurus ã§ OGP ç”»åƒã‚’è¨­å®šã™ã‚‹
authors: [bonychops]
tags: ["ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼", "Advent Calendar 2025", "Docusaurus", "OGP"]
advent: 2025
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Docusaurus ã§ Blog ã‚’æ›¸ãã®ã¯æœ€é«˜ã§ã™ ğŸ˜ (ãã†ãªã®ï¼Ÿã¨ã„ã†æ–¹ã¯ -> [ãƒ–ãƒ­ã‚°ã‚’ã‚½ãƒ¼ã‚¹ç®¡ç†ã—ã‚ˆã†ï¼ã€Docusaurus ç·¨ã€‘](/lets-docusaurus))ã€‚
ãŸã ã€æ¨™æº–ã§ã¯ OGP ç”»åƒã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã›ã‚“[^static]ã€‚
æœ¬è¨˜äº‹ã§ã¯ã€ã‚¿ã‚¤ãƒˆãƒ«ã‚„å†…å®¹ã«åˆã‚ã›ã¦ OGP ç”»åƒã‚’ç”Ÿæˆã—è¨­å®šã™ã‚‹æ–¹æ³•ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

ã¡ãªã¿ã«ã€ã“ã®è¨˜äº‹ã¯ã“ã‚“ãªæ„Ÿã˜ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

![Advent Calendar 2025 | Docusaurusã§OGPç”»åƒã‚’è¨­å®šã™ã‚‹ | BonyChops Blog ã¨æ›¸ã‹ã‚ŒãŸç”»åƒ](./ogp.png)


{/* truncate */}

## å°å…¥[^docusaurus-og]

åŸºæœ¬çš„ã«ã¯ [Docusaurus OG ã®`README.md`](https://github.com/acid-info/logos-docusaurus-plugins/tree/main/packages/docusaurus-og)ã«æ›¸ã„ã¦ã‚ã‚‹ã“ã¨ã‚’ã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å°å…¥

1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   ```sh
   npm install @acid-info/docusaurus-og
   ```
2. `docusaurus.config.js`ã®è¨­å®š
   ```js title="docusaurus.config.js"
   // ...
   // pluginsã«è¿½åŠ ã™ã‚‹
   plugins: [
     [
       "@acid-info/docusaurus-og",
       {
         path: "./preview-images", // buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§OGPç”»åƒã‚’åãå‡ºã™å…ˆ
         imageRenderers: {}, // ã“ã“ã¯å¾Œã»ã©
       },
     ],
   ];
   ```
3. `satori`, `sharp`ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ã’ã¦ãŠã

   `@acid-info/docusaurus-og` ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹`satori`, `sharp`ãŒå¤ã‹ã£ãŸãŸã‚ã€`package-lock.json`ã‚’ã„ã˜ã£ã¦ç„¡ç†ã‚„ã‚Šã‚ã’ã¦ãŠãã¾ã™ã€‚ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ãŒã‚ã‚‹ã‹ã‚‚ã€‚

   :::info
   ã“ã‚Œã‚’ã—ãªã„ã¨ Font Awesome ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã†ã¾ãå‡ºã›ã¾ã›ã‚“ã§ã—ãŸ
   :::

   ```json title="package-lock.json"
    "node_modules/@acid-info/docusaurus-og": {
      "version": "1.0.3-beta.2",
      // ...
      "dependencies": {
        // ...
        // highlight-start
        "satori": "^0.18.1",
        "sharp": "^0.34.1"
        // highlight-end
      },
      // ...
    },
   ```

### Image Renderer ã‚’ä½œã‚‹

ç”»åƒã®ç”Ÿæˆã‚’ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚

:::info
ã“ã“ã§ã¯ blog ã®å‰æã§ä½œã£ã¦ã„ã‚‹ã®ã§ã€docs å‘ã‘ã®è¨­å®šãŒçŸ¥ã‚ŠãŸã„å ´åˆã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/acid-info/logos-docusaurus-plugins/tree/main/packages/docusaurus-og#create-an-image-renderer)ã‚’å‚è€ƒã«ã™ã‚‹ã‹ã€[`DocsPageData` ã®å‹å®šç¾©](https://github.com/acid-info/logos-docusaurus-plugins/blob/main/packages/docusaurus-og/src/server/types/docs.types.ts)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
:::

:::info
TS ã¨ jsx ã‚’ä½¿ã£ã¦ã„ã‚‹å‰æã®èª¬æ˜ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®è¨­å®šã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/acid-info/logos-docusaurus-plugins/tree/main/packages/docusaurus-og#create-an-image-renderer)ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
:::

1. Image Renderer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

   ```tsx title="src/components/ImageRenderer/index.tsx"
   import { readFileSync } from "node:fs";
   import { join } from "node:path";
   import type {
     BlogPageData,
     ImageRenderer,
     PageData,
   } from "@acid-info/docusaurus-og";
   import React from "react";

   export const blog: ImageRenderer<BlogPageData> = (data) => {
     if (data.pageType !== "post") {
       // è¨˜äº‹ä¸€è¦§ç”»é¢ãªã©
       return [
         <div style={{ display: "flex", background: "black", color: "white" }}>
           {data.plugin.blogTitle}
         </div>,
         {
           width: 1200,
           height: 630,
           fonts: [
             {
               name: "Noto Sans JP",
               data: readFileSync(
                 join(__dirname, "../../../static/fonts/MPLUS1p-Bold.ttf")
               ),
               weight: 400,
               style: "normal",
             },
           ],
         },
       ];
     }

     // è¨˜äº‹ã®ãƒšãƒ¼ã‚¸
     return [
       <div style={{ display: "flex", background: "black", color: "white" }}>
         {data.data.metadata.title}
       </div>,
       {
         width: 1200,
         height: 630,
         fonts: [
           {
             name: "Noto Sans JP",
             data: readFileSync(
               join(__dirname, "../../../static/fonts/MPLUS1p-Bold.ttf")
             ),
             weight: 400,
             style: "normal",
           },
         ],
       },
     ];
   };
   ```

2. ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®è¨­å®š
   :::warning
   jsx ã‚’ä½¿ã†å ´åˆã¯ä¸‹è¨˜ã®è¨­å®šãŒãªã„ã¨å‹•ä½œã—ã¾ã›ã‚“ã€‚TS ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„å ´åˆã¯[Vite](https://vite.dev/)ã‚„[SWC](https://swc.rs/)ã‚’ç”¨ã„ã¦ã€ä¸Šè¨˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ`lib`ã«å‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚
   :::

   ```json title="tsconfig.client.json"
   {
     "compilerOptions": {
       "noEmit": false,
       "composite": true,
       "incremental": true,
       "esModuleInterop": true,
       "tsBuildInfoFile": "./lib/.tsbuildinfo-client",
       "rootDir": "src",
       "outDir": "lib",
       "module": "CommonJS",
       "target": "esnext",
       "jsx": "react",
       "types": ["node"],
       "baseUrl": "./",
       "lib": ["DOM"]
     },
     "include": ["src"]
   }
   ```

3. `prestart`, `prebuild` ã®è¿½åŠ 

   ```json title="package.json"
   {
     "scripts": {
       // ...
       //highlight-start
       "prestart": "tsc --project tsconfig.client.json",
       "prebuild": "tsc --project tsconfig.client.json"
       // highlight-end
     }
   }
   ```

4. `.gitignore` ã« `lib` ã‚’è¶³ã™

   ```txt title=".gitignore"
   # ...

   # highlight-next-line
   lib
   ```

5. `imageRenderers` è¨­å®š

   ```js title="docusaurus.config.js"
   plugins: [
     [
       "@acid-info/docusaurus-og",
       {
         path: "./preview-images", // relative to the build directory
         imageRenderers: {
           // src/components/ImageRenderer/index.tsx ã® blogã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å ´åˆã®ä¾‹
           "docusaurus-plugin-content-blog":
             require("./lib/components/ImageRenderer").blog,
           // ãƒ–ãƒ­ã‚°ä»¥å¤–ã¯docusaurus-plugin-content-docs, -pages ã§å„è‡ªè¨­å®šã§ãã‚‹
         },
       },
     ],
   ];
   ```
6. ãƒ•ã‚©ãƒ³ãƒˆã®å°å…¥
   
   ãƒ“ãƒ«ãƒ‰ã«ä½¿ç”¨ã™ã‚‹ãƒ•ã‚©ãƒ³ãƒˆã¯ Image Rendererã«è¨­å®šã—ãŸãƒ‘ã‚¹ã«é…ç½®ã—ã¦ãã ã•ã„(ã“ã“ã§ã¯`static/fonts/MPLUS1p-Bold.ttf`)ã€‚

   :::warning
   ãƒ•ã‚©ãƒ³ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ã¯æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚å¿…è¦å‡ºã‚Œã°ã€prestart, prebuildã§å®Ÿè¡Œã•ã‚Œã‚‹ãƒ•ã‚©ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆç­‰ã‚’è¨­å®šã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã«åŒå°ã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹å·¥å¤«ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
   
   è‡ªåˆ†ã¯[ä½¿ç”¨ãƒ•ã‚©ãƒ³ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](https://fonts.google.com/specimen/M+PLUS+1p/license)ã‚’ãã®ã¾ã¾`licenses/OFL.txt`ã«é…ç½®ã—ã¾ã—ãŸã€‚
   :::
7. å®Œæˆ


:::note ã“ã®ãƒšãƒ¼ã‚¸ã§è©¦ã—ã¦ã¿ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹
![Docusaurusã§OGPç”»åƒã‚’è¨­å®šã™ã‚‹ ã¨ã ã‘æ›¸ã‹ã‚ŒãŸç”»åƒ](./ogp2.png)
:::

### ãƒšãƒ¼ã‚¸ã”ã¨ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å¤‰ãˆãŸã„

è‡ªåˆ†ã¯ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ–‡åŒ–ãŒå¥½ããªã®ã§ã€ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨˜äº‹ã«ã ã‘ç‰¹åˆ¥ãªãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ–½ã—ãŸã„ã§ã™ã€‚ãã†ã„ã†å ´åˆã¯ `frontMatter` ã§ç‹¬è‡ªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸæ¡ä»¶åˆ†å²ã‚’ã•ã›ã¾ã™ã€‚

```tsx title="src/components/ImageRenderer/index.tsx"
export const blog: ImageRenderer<BlogPageData> = (data) => {
  if (data.pageType !== "post") {
    return [
      /* */
    ];
  }

  // highlight-start
  const { title, frontMatter } = data.data.metadata;
  const { advent: _advent } = frontMatter;

  const advent =
    typeof _advent === "string"
      ? _advent
      : typeof _advent === "number"
      ? _advent.toString()
      : undefined;
  // highlight-end

  if (advent) {
    return <Advent />;
  } else {
    return <Default />;
  }
};
```

```markdown title="blog/current/2025-12-01-docusaurus-ogp/index.mdx"
---
title: Docusaurusã§OGPç”»åƒã‚’è¨­å®šã™ã‚‹
authors: [bonychops]
tags: ["ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼", "Advent Calendar 2025", "Docusaurus", "OGP"]
# highlight-next-line
advent: 2025 # ã“ã®æŒ‡å®šã®æœ‰ç„¡ã§ãƒ‡ã‚¶ã‚¤ãƒ³ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹
---

...
```

## çµ‚ã‚ã‚Šã«

ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã—ãŸã€‚å…·ä½“çš„ãªå®Ÿè£…ã¯[ã‚½ãƒ¼ã‚¹](https://github.com/BonyChops/blog/tree/main/src/components/ImageRenderer)ã‚’è¦‹ã¦ãã ã•ã„ã€‚

<Tabs>
  <TabItem value="normal" label="é€šå¸¸" default>
    ![M1 Macã§ä»®æƒ³Windowdã‚’èµ·å‹•ã™ã‚‹ | BonyChops Blog ã¨æ›¸ã‹ã‚ŒãŸç”»åƒ](./ogp3.png)
  </TabItem>
  <TabItem value="advent" label="ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼">
    ![Advent Calendar 2025 | Docusaurusã§OGPç”»åƒã‚’è¨­å®šã™ã‚‹ | BonyChops Blog ã¨æ›¸ã‹ã‚ŒãŸç”»åƒ](./ogp.png)
  </TabItem>
</Tabs>

ãªã‹ãªã‹ã„ã„æ„Ÿã˜ã€‚

[^static]: é™çš„ãªç”»åƒã‚’è¨­å®šã™ã‚‹å ´åˆã¯`<head>`ã‚¿ã‚°å†…ã«è¿½è¨˜ã™ã‚‹ã ã‘ã§ã§ãã¾ã™: https://docusaurus.io/docs/seo#single-page-metadata
[^docusaurus-og]: [logos-docusaurus-plugins/packages/docusaurus-og at main Â· acid-info/logos-docusaurus-plugins](https://github.com/acid-info/logos-docusaurus-plugins/tree/main/packages/docusaurus-og)
